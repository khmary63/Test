# Игра «Шарики»

Игра с анимированными шариками на поле: движение, смешивание цветов при касании, всасывание и выпуск шариков мышью, зона удаления.

## Что это и как работает

- **Поле** — белое окно с движущимися шариками. Шарики отскакивают от стен, при столкновении друг с другом **смешивают цвета** (без отталкивания).
- **Управление мышью:**
  - **ЛКМ по шарику** — «всасывание» ближайшего шарика в инвентарь (в радиусе курсора).
  - **ЛКМ по пустому месту** при непустом инвентаре — «выпуск» шарика в точку клика (полёт от центра экрана к курсору).
  - **ПКМ** — выпуск шарика в позицию курсора.
- **Зона удаления** — правый нижний угол поля. Шарики, попавшие в эту зону, удаляются.
- Количество шариков в инвентаре и их цвета отображаются вверху слева.

Логика игры вынесена в модуль `logic.py`, отрисовка и ввод — в `game_gui.py`.

---

## Запуск локально

### Зависимости

- Python 3.8+
- [pygame](https://www.pygame.org/) ≥ 2.5.0

### Установка и запуск

```bash
pip install -r requirements.txt
python gui.py
```

Точка входа — **`gui.py`**: одна команда `python gui.py` запускает игру в графическом окне.

---

## Запуск в Docker (графическое окно через X11)

Игра рисует окно через pygame (SDL). В контейнере для вывода окна на экран хоста используется **X11**: контейнер подключается к X-серверу хоста.

### Сборка образа

В каталоге с проектом (где лежат `Dockerfile`, `requirements.txt`, `gui.py`, `game_gui.py`, `logic.py`):

```bash
docker build -t balls-game .
```

### Запуск контейнера с графическим окном

На **Linux** с запущенным X-сервером:

1. Разрешите контейнеру подключаться к X-серверу:
   ```bash
   xhost +local:docker
   ```

2. Запуск с пробросом дисплея и сокета X11:
   ```bash
   docker run --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix balls-game
   ```

Окно игры появится на вашем рабочем столе.

Чтобы отозвать доступ после игры:
```bash
xhost -local:docker
```

### Windows / macOS

- **Windows:** X11 в контейнере обычно используют с WSL2 и установленным на хосте X-сервером (VcXsrv, X410 и т.п.). Тогда в WSL задают `DISPLAY` и монтируют сокет так, как это сделано в вашем X-сервере.
- **macOS:** можно использовать XQuartz и аналогично передать `DISPLAY` и сокет X11 в `docker run`.

В обоих случаях команда сборки та же: `docker build -t balls-game .`, а параметры `docker run` подстраивают под ваш X-сервер и переменную `DISPLAY`.

---

## Структура проекта

| Файл | Назначение |
|------|------------|
| `gui.py` | Точка входа — запуск игры одной командой |
| `game_gui.py` | Окно, отрисовка, обработка мыши (pygame) |
| `logic.py` | Логика: шарики, движение, смешивание цветов, инвентарь, зона удаления |
| `requirements.txt` | Зависимости Python (pygame) |
| `Dockerfile` | Образ для запуска игры в контейнере с X11 |
